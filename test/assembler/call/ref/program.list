message:_	_STRING_	_"Hello, world!"_

# main program_
MAIN:_	_PUSH_ _BYTE_	_message_
	_CALL_	_print_s_
	_CALL_	_print_nl_
	_EXIT_

# print a string_
address:_	_BYTE_	_0_
print_s:_	_POP_ _BYTE_	_@address_
loop:_	_PUSH_ _BYTE_	_@@address_
	_FLAGS_ _BYTE_
	_ZERO_ _RET_
	_OUT_
	_INC_ _BYTE_	_@address_
	_JUMP_	_loop_

# print a newline_
newline:_	_BYTE_	_10_
print_nl:_	_PUSH_ _BYTE_	_@newline_
	_OUT_
	_RET_

{[message:] [] [] [] [STRING] [] [] ["Hello, world!"] []}
{[] [] [] [] [] [] [] [] []}
{[] [] [] [] [] [] [] [] []}
{[MAIN:] [] [] [PUSH] [BYTE] [message] [] [] []}
{[] [] [] [CALL] [] [print_s] [] [] []}
{[] [] [] [CALL] [] [print_nl] [] [] []}
{[] [] [] [EXIT] [] [] [] [] []}
{[] [] [] [] [] [] [] [] []}
{[] [] [] [] [] [] [] [] []}
{[address:] [] [] [] [BYTE] [] [] [0] []}
{[print_s:] [] [] [POP] [BYTE] [] [@address] [] []}
{[loop:] [] [] [PUSH] [BYTE] [] [@@address] [] []}
{[] [] [] [FLAGS] [BYTE] [] [] [] []}
{[] [] [ZERO] [RET] [] [] [] [] []}
{[] [] [] [OUT] [] [] [] [] []}
{[] [] [] [INC] [BYTE] [] [@address] [] []}
{[] [] [] [JUMP] [] [loop] [] [] []}
{[] [] [] [] [] [] [] [] []}
{[] [] [] [] [] [] [] [] []}
{[newline:] [] [] [] [BYTE] [] [] [10] []}
{[print_nl:] [] [] [PUSH] [BYTE] [] [@newline] [] []}
{[] [] [] [OUT] [] [] [] [] []}
{[] [] [] [RET] [] [] [] [] []}
{[] [] [] [] [] [] [] [] []}
			DATA
message::
00			STRING		48 65 6C 6C 6F 2C 20 77 6F 72 6C 64 21 00
Invalid opcode: 'main' 
exit status 1
