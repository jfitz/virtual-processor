		DATA
message:
00		STRING		48 65 6C 6C 6F 2C 20 77 6F 72 6C 64 21 00
address:
0E		BYTE		00
count:
0F		BYTE		00
newline:
10		BYTE		0A
		ENDSEGMENT

		CODE
MAIN:
00	60 00	PUSH.B	message
02	81 0E	POP.B	@address
04	60 0E	PUSH.B	14
06	81 0F	POP.B	@count
loop:
08	31 0F	DEC.B	@count
0A	11 0F	FLAGS.B	@count
0C	E1 04	JNZ.R	print
0E	E0 09	JUMP.R	printnl
print:
10	62 0E	PUSH.B	@@address
12	08	OUT	
13	21 0E	INC.B	@address
15	E0 F3	JUMP.R	loop
printnl:
17	61 10	PUSH.B	@newline
19	08	OUT	
1A	00	EXIT	
		ENDSEGMENT

